<!-- Plugin Configuration File: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN, cannot be changed between the plugin versions. -->
    <id>com.sakura-sedaia.BlenderDevelopment</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-name -->
    <name>Blender Development</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor url="https://www.sakura-sedaia.com">Sakura Sedaia</vendor>
    <resource-bundle>messages.BlenderBundle</resource-bundle>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-description -->
    <description><![CDATA[
        <h1>Blender Development for PyCharm</h1>
        <p><b>Blender Development</b> seamlessly integrates professional Blender extension development into the PyCharm IDE. This project is licensed under the <b>GNU GPL v3</b>.</p>
        <p>This plugin provides a powerful suite of tools designed to streamline the entire lifecycle of creating, testing, and deploying Blender extensions (v4.2+) using modern development practices.</p>

        <p><i><b>Note:</b> This plugin is currently in active development. Please report bugs or feature requests at the <a href="https://github.com/SakuraSedaia/blender_pycharm/issues">GitHub Repository</a>.</i></p>

        <h3>Key Capabilities:</h3>
        <ul>
            <li><b>Automated Version Management:</b> Effortlessly download, install, and switch between multiple Blender versions (including 4.2 LTS and 5.0) directly from a dedicated management tool window.</li>
            <li><b>Advanced Sandboxing:</b> Develop in total isolation. Launch Blender with project-local configuration, scripts, and preferences to ensure your development environment never interferes with your production Blender setup.</li>
            <li><b>Integrated Hot-Reloading:</b> Experience instant feedback with automatic reloads upon saving files in PyCharm, or trigger manual reloads via <code>Ctrl+Alt+R</code>. The robust reload logic handles module purging and repository refreshing to prevent common caching issues.</li>
            <li><b>Comprehensive Project Wizard:</b> Bootstrap new extensions in seconds with a feature-rich template. Includes a dedicated UI for configuring <code>blender_manifest.toml</code> (metadata, permissions, build settings) and automated setup of Run Configurations.</li>
            <li><b>Blender CLI Integration:</b> Run specialized configurations for <code>build</code> and <code>validate</code> commands, ensuring your extensions are marketplace-ready without leaving the IDE.</li>
            <li><b>Customizable Developer Experience:</b> Supports custom splash screens for sandboxed sessions, flexible path management, and automatic detection of system Blender installations.</li>
        </ul>

        <p>Inspired by the <a href="https://github.com/JacquesLucke/blender_vscode">Blender Development extension for Visual Studio Code</a> by <b>Jacques Lucke</b> and optimized for the PyCharm ecosystem.</p>

        <p><small><i>Blender is a registered trademark of the Blender Foundation. This plugin is an independent project and is not affiliated with, endorsed by, or sponsored by the Blender Foundation. The Blender logo is used under nominative fair use to denote compatibility.</i></small></p>
    ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.python</depends>
    <depends>com.intellij.modules.pycharm</depends>

    <!-- Extensions defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <projectConfigurable
                instance="com.sakurasedaia.blenderextensions.settings.BlenderConfigurable"
                id="com.sakurasedaia.blenderextensions.settings.BlenderConfigurable"
                key="settings.display.name"
                nonDefaultProject="true"/>

        <configurationType implementation="com.sakurasedaia.blenderextensions.run.BlenderRunConfigurationType"/>
        <defaultLiveTemplates file="liveTemplates/Blender.xml"/>

        <directoryProjectGenerator implementation="com.sakurasedaia.blenderextensions.project.BlenderAddonProjectGenerator"/>
        <iconProvider implementation="com.sakurasedaia.blenderextensions.icons.BlenderIconProvider"/>
        
        <toolWindow id="MBVS"
                    anchor="right" 
                    factoryClass="com.sakurasedaia.blenderextensions.ui.BlenderToolWindowFactory" 
                    icon="com.sakurasedaia.blenderextensions.icons.BlenderIcons.Blender"/>

        <fileTemplateGroup implementation="com.sakurasedaia.blenderextensions.actions.BlenderTemplateGroupFactory"/>
    </extensions>

    <actions>
        <group id="BlenderExtensions.Menu"
               icon="com.sakurasedaia.blenderextensions.icons.BlenderIcons.Blender">
            <add-to-group group-id="MainMenu" anchor="last"/>
            <action id="com.sakurasedaia.blenderextensions.actions.ReloadExtensionAction"
                    class="com.sakurasedaia.blenderextensions.actions.ReloadExtensionAction"
                    icon="com.sakurasedaia.blenderextensions.icons.BlenderIcons.Refresh">
                <keyboard-shortcut keymap="$default" first-keystroke="control alt R"/>
            </action>
            <action id="com.sakurasedaia.blenderextensions.actions.MarkAsBlenderSourceAction"
                    class="com.sakurasedaia.blenderextensions.actions.MarkAsBlenderSourceAction">
                <add-to-group group-id="ProjectViewPopupMenu" anchor="after" relative-to-action="MarkRootGroup"/>
            </action>
        </group>

        <action id="com.sakurasedaia.blenderextensions.actions.CreateBlenderFileAction"
                class="com.sakurasedaia.blenderextensions.actions.CreateBlenderFileAction"
                icon="com.sakurasedaia.blenderextensions.icons.BlenderIcons.Blender">
            <add-to-group group-id="NewGroup" anchor="after" relative-to-action="NewFile"/>
        </action>
    </actions>

    <applicationListeners>
        <listener class="com.sakurasedaia.blenderextensions.listeners.BlenderFileSaveListener"
                  topic="com.intellij.openapi.fileEditor.FileDocumentManagerListener"/>
    </applicationListeners>
</idea-plugin>